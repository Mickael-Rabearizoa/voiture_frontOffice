import{r as j,E as w,j as e,S as a,e as m,T as o,G as R,C as q,B as h,n as U,L as I,i as F,y as H,P as u,z as N,M as V,A as W,I as $,D as _,h as Y,x as J,W as K}from"./index-43ff6e2d.js";import{c as Q,d as X,F as C}from"./format-number-66c06584.js";import{A as Z,a as ee,F as te,R as T,b as P,C as re,c as O}from"./color-preview-bf38c1c8.js";import{T as f}from"./TextField-1cff618a.js";import{C as se}from"./Checkbox-60f7a729.js";import{G as v}from"./Grid-12b6760a.js";import"./Select-5e3d5f29.js";import"./Menu-e47c6deb.js";import"./Popper-bd852e16.js";function ne(){const[l,t]=j.useState([]),r=localStorage.getItem("token"),d=localStorage.getItem("email"),p=j.useCallback(async()=>{try{const s=await w.get(`https://ventevoiture-production-989c.up.railway.app/login/findByLogin?login=${d}`,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${r}`}});return console.log(s.data.response),localStorage.setItem("nom",s.data.response.nom),localStorage.setItem("prenom",s.data.response.prenom),localStorage.setItem("idutilisateur",s.data.response.idutilisateur),s.data.response.idutilisateur}catch(s){throw console.log("erreur",s),s}},[r,d]);return j.useEffect(()=>{async function s(){try{const c=await p(),b=await w.get(`https://ventevoiture-production-989c.up.railway.app/V_AnnonceUtilisateur/getListAnnonceUtilisateur?Idutilisateur=${c}`,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${r}`}});t(b.data)}catch(c){console.error("Une erreur s'est produite lors de la récupération de la liste:",c)}}console.log("Tonga eto nefa an"),s()},[r,p]),l}function A({post:l,index:t}){const{cover:r,title:d,prix:p,annee:s}=l,c="vendu",[b,y]=j.useState("");j.useState(()=>{y("red")},[c]);const i=t===-1,n=t===-1||t===-1,g=e.jsxs(o,{variant:"caption",sx:{color:b,fontSize:"-7.25rem"},children:["État de la voiture: ",c]}),E=e.jsxs(h,{children:[e.jsx(I,{color:"inherit",variant:"subtitle2",underline:"hover",sx:{fontSize:15,height:44,overflow:"hidden",WebkitLineClamp:2,display:"-webkit-box",WebkitBoxOrient:"vertical",...i&&{typography:"h3",height:60},...(i||n)&&{color:"common.white"}},children:d}),e.jsx(o,{variant:"body1",sx:{color:"green",fontSize:15,mt:1},children:`Ar ${p}`})]}),D=e.jsx(a,{direction:"row",flexWrap:"wrap",spacing:1.5,justifyContent:"flex-end",sx:{mt:3,color:"text.disabled"},children:[{number:s,icon:"eva:trending-up-outline "},{number:p}].map((x,M)=>e.jsxs(a,{direction:"row",sx:{...(i||n)&&{opacity:.48,color:"common.white"}},children:[e.jsx(m,{width:16,icon:x.icon,sx:{mr:.5}}),e.jsx(o,{variant:"caption",children:Q(x.number)})]},M))}),z=e.jsx(h,{component:"img",alt:d,src:r,sx:{top:0,width:1,height:1,objectFit:"cover",position:"absolute"}}),L=e.jsx(o,{variant:"caption",component:"div",sx:{mb:2,color:"text.disabled",...(i||n)&&{opacity:.48,color:"common.white"}},children:X(s)}),G=e.jsx(H,{color:"paper",src:"/assets/icons/shape-avatar.svg",sx:{width:80,height:36,zIndex:9,bottom:-15,position:"absolute",color:"background.paper",...(i||n)&&{display:"none"}}});return e.jsx(R,{xs:12,sm:i?12:6,md:i?6:3,children:e.jsxs(q,{children:[e.jsxs(h,{sx:{position:"relative",pt:"calc(100% * 3 / 4)",...(i||n)&&{pt:"calc(100% * 4 / 3)","&:after":{top:0,content:"''",width:"100%",height:"100%",position:"absolute",bgcolor:x=>U(x.palette.grey[900],.72)}},...i&&{pt:{xs:"calc(100% * 4 / 3)",sm:"calc(100% * 3 / 4.66)"}}},children:[G,z]}),e.jsxs(h,{sx:{p:x=>x.spacing(4,3,3,3),...(i||n)&&{width:1,bottom:0,position:"absolute"}},children:[L,E,D]}),e.jsxs(h,{sx:{p:3},children:[g,e.jsx(I,{href:"/detail",underline:"none",children:e.jsx(F,{fullWidth:!0,size:"large",type:"submit",color:"inherit",variant:"outlined",startIcon:e.jsx(m,{icon:"ic:round-clear-all"}),children:"Voir details"})})]})]})})}A.propTypes={post:u.object.isRequired,index:u.number};k.propTypes={posts:u.array.isRequired};function k({posts:l}){return e.jsx(Z,{sx:{width:280},autoHighlight:!0,popupIcon:null,slotProps:{paper:{sx:{width:320,[`& .${ee.option}`]:{typography:"body2"}}}},options:l,getOptionLabel:t=>t.title,isOptionEqualToValue:(t,r)=>t.id===r.id,renderInput:t=>e.jsx(f,{...t,placeholder:"Search post...",InputProps:{...t.InputProps,startAdornment:e.jsx(N,{position:"start",children:e.jsx(m,{icon:"eva:search-fill",sx:{ml:1,width:20,height:20,color:"text.disabled"}})})}})})}S.propTypes={options:u.array,onSort:u.func};function S({options:l,onSort:t}){return e.jsx(f,{select:!0,size:"small",value:"latest",onChange:t,children:l.map(r=>e.jsx(V,{value:r.value,children:r.label},r.value))})}const oe=["Tout","Manuelle","Automatique"],ie=["Tout","Diesel","Essence","Gaz"],ae=["up4Star","up3Star","up2Star","up1Star"],le=["#00AB55","#000000","#FFFFFF","#FFC0CB","#FF4842","#1890FF","#94D82D","#FFC107"];function B({openFilter:l,onOpenFilter:t,onCloseFilter:r}){const d=e.jsxs(a,{spacing:1,children:[e.jsx(o,{variant:"subtitle2",children:"Transmission"}),e.jsx(te,{children:oe.map(n=>e.jsx(C,{control:e.jsx(se,{}),label:n},n))})]}),p=e.jsxs(a,{spacing:1,children:[e.jsx(o,{variant:"subtitle2",children:"Carburant"}),e.jsx(T,{children:ie.map(n=>e.jsx(C,{value:n,control:e.jsx(P,{}),label:n},n))})]}),s=e.jsxs(a,{spacing:1,children:[e.jsx(o,{variant:"subtitle2",children:"Colors"}),e.jsx(re,{name:"colors",selected:[],colors:le,onSelectColor:n=>[].includes(n),sx:{maxWidth:38*4}})]}),c=e.jsxs(a,{spacing:1,children:[e.jsx(o,{variant:"subtitle2",children:"Rating"}),e.jsx(T,{children:ae.map((n,g)=>e.jsx(C,{value:n,control:e.jsx(P,{disableRipple:!0,color:"default",icon:e.jsx(O,{readOnly:!0,value:4-g}),checkedIcon:e.jsx(O,{readOnly:!0,value:4-g}),sx:{"&:hover":{bgcolor:"transparent"}}}),label:"& Up",sx:{my:.5,borderRadius:1,"&:hover":{opacity:.48}}},n))})]}),b=e.jsxs(a,{spacing:1,children:[e.jsx(o,{variant:"subtitle2",children:"Marque"}),e.jsx(S,{options:[{value:"latest",label:"Tout"},{value:"Audi",label:"Audi"},{value:"Bentley",label:"Bentley"},{value:"Dacia",label:"Dacia"}]})]}),y=e.jsxs(a,{spacing:1,children:[e.jsx(o,{variant:"subtitle2",children:"Type de voiture"}),e.jsx(S,{options:[{value:"latest",label:"Tout"},{value:"Berline",label:"Berline"},{value:"Cabriolet",label:"Cabriolet"},{value:"SUV",label:"SUV"}]})]}),i=e.jsxs(v,{container:!0,spacing:1,alignItems:"center",children:[" ",e.jsx(v,{item:!0,xs:12,children:e.jsx(o,{variant:"subtitle2",children:"Prix"})}),e.jsx(v,{item:!0,xs:6,children:e.jsx(f,{name:"prixmin",label:"Prix min"})}),e.jsx(v,{item:!0,xs:6,children:e.jsx(f,{name:"prixmax",label:"Prix max"})})]});return e.jsxs(e.Fragment,{children:[e.jsx(F,{disableRipple:!0,color:"inherit",endIcon:e.jsx(m,{icon:"ic:round-filter-list"}),onClick:t,children:"Filters "}),e.jsxs(W,{anchor:"right",open:l,onClose:r,PaperProps:{sx:{width:280,border:"none",overflow:"hidden"}},children:[e.jsxs(a,{direction:"row",alignItems:"center",justifyContent:"space-between",sx:{px:1,py:2},children:[e.jsx(o,{variant:"h6",sx:{ml:1},children:"Filters"}),e.jsx($,{onClick:r,children:e.jsx(m,{icon:"eva:close-fill"})})]}),e.jsx(_,{}),e.jsx(Y,{children:e.jsxs(a,{spacing:3,sx:{p:3},children:[b,y,d,p,s,i,c]})}),e.jsx(h,{sx:{p:3},children:e.jsx(F,{fullWidth:!0,size:"large",type:"submit",color:"inherit",variant:"outlined",startIcon:e.jsx(m,{icon:"ic:round-clear-all"}),children:"RECHERCHER"})})]})]})}B.propTypes={openFilter:u.bool,onOpenFilter:u.func,onCloseFilter:u.func};function ce(){const[l,t]=j.useState(!1),r=ne(),d=()=>{t(!0)},p=()=>{t(!1)};return e.jsxs(J,{children:[e.jsx(a,{direction:"row",alignItems:"center",justifyContent:"space-between",mb:5,children:e.jsx(o,{variant:"h4",children:"Historique de ses annonces"})}),e.jsxs(a,{mb:5,direction:"row",alignItems:"center",justifyContent:"space-between",children:[e.jsx(k,{posts:r}),e.jsx("div",{style:{marginLeft:"auto"},children:e.jsx(B,{openFilter:l,onOpenFilter:d,onCloseFilter:p})})]}),e.jsx(R,{container:!0,spacing:3,children:r.map((s,c)=>e.jsx(A,{post:s,index:c},s.id))})]})}function ve(){return e.jsxs(e.Fragment,{children:[e.jsx(K,{children:e.jsx("title",{children:" Historique | Minimal UI "})}),e.jsx(ce,{})]})}export{ve as default};
